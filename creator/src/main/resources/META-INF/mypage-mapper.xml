<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="MypageMapper">

	<select id="assetsList"
			resultType="kr.co.creator.vo.InvestVO">
		select a.deposit
			, p.guarantee_price
			, i.invest_price
			FROM i.invest_list, a.account_list, p.project_list
			where p.project_num = i.project_num
				   p.project_num =  a.project_num
				 and i.user_num = #{user_num}
	</select>
	
	<select id="InvestList"
			parameterType="kr.co.creator.vo.MemberVO"
			resultType="kr.co.creator.vo.MypageVO">
			select i.invest_date 
			, p.project_num 
			, p.project_name 
			, p.rate rate 
			, i.invest_price 
			, p.refund_count 
			, p.refund refund 
			, p.refund_deadline 
			, p.ach_state 
			from invest_list i, project_list p
			where i.project_num = p.project_num 
				and i.user_num = #{user_num}
	</select>
	
	<select id="Account"
		parameterType="kr.co.creator.vo.MemberVO"
		resultType="kr.co.creator.vo.AccountVO">
		select a.account_name
		, a.bank_name
		, a.bank_num
		, a.deposit
		from account_list a
		where a.user_num = #{user_num}
	</select>
	
	<select id="User"
		parameterType="kr.co.creator.vo.MemberVO"
		resultType="kr.co.creator.vo.UserVO">
		select *
		from user_list 
		where user_num = #{user_num}
	</select>
	
	<select id="Inout"
		parameterType="kr.co.creator.vo.MemberVO"
		resultType="kr.co.creator.vo.InOutVO">
		select sum(input_history) input_history, sum(output_history) output_history 
			FROM in_out i, account_list a 
			WHERE i.account_num = a.account_num 
			AND a.user_num = #{user_num}
	</select>

	<select id="MyPageModifyU" parameterType="kr.co.creator.vo.MemberListVO" resultType="kr.co.creator.vo.MemberListVO">
		select *
		from user_list	
		where user_num = #{user_num} and user_password = #{user_password}
	</select>
	
	<select id="MyPageModifyB" parameterType="kr.co.creator.vo.MemberListVO" resultType="kr.co.creator.vo.MemberListVO">
		select * 
		from busi_user_list 
		where busi_num = #{busi_num} and busi_password = #{busi_password}
	</select>
	
	<select id="MyPageBank" parameterType="kr.co.creator.vo.AccountVO" resultType="kr.co.creator.vo.AccountVO">
		select * 
		from account_list 
		where user_num = #{user_num} or busi_num = #{busi_num} 
	</select>	
	
	
</mapper>


