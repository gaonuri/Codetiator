<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="LoginMapper">
	
	<select id="loginUser" parameterType="kr.co.creator.vo.MemberVO" resultType="kr.co.creator.vo.MemberVO">
		select * 
		from user_list
		where email=#{email} and user_password=#{user_password}
	</select>
	
	<select id="loginBusi" parameterType="kr.co.creator.vo.MemberVO" resultType="kr.co.creator.vo.MemberVO">
		select * 
		from busi_user_list
		where busi_resi_num=#{busi_resi_num} and busi_password=#{busi_password}
	</select>
	
	<select id="findPwdChk" parameterType="java.lang.String" resultType="int">
	     select count(*) 
	     from user_list 
	     where email=#{email}
 	</select>
 	
 	<select id="busifindChk" parameterType="java.lang.String" resultType="int">
	     select count(*) 
	     from busi_user_list 
	     where manager_email=#{manager_email}
 	</select>
	
	<update id="updatePwd" parameterType="kr.co.creator.vo.FindPwdVO">
		update user_list
		set user_password = #{newPassword} 
		where email = #{email}
	</update>
	
	<select id="selectBusiName" parameterType="java.lang.String" resultType="java.lang.String">
		select manager_name
		from busi_user_list
		where manager_email = #{manager_email}
	</select>
	
	<select id="selectName" parameterType="java.lang.String" resultType="java.lang.String">
		select user_name
		from user_list
		where email = #{email}
	</select>
	
	<select id="selectEmail" parameterType="kr.co.creator.vo.FindPwdVO" resultType="kr.co.creator.vo.FindPwdVO">
		select email
		from user_list
		where user_name = #{user_name}
	</select>
	
	<select id="userList" resultType="kr.co.creator.vo.MemberListVO">
		select	*
		from	user_list
	</select>
	
	<select id="busiUserList" resultType="kr.co.creator.vo.MemberListVO">
		select	*
		from	busi_user_list
	</select>
	
	<update id="insertNumber" parameterType="kr.co.creator.vo.FindPwdVO">
		update busi_user_list
		set cer_number = #{newPassword} 
		where manager_email = #{manager_email}
	</update>
	
	<select id="CheckCerNumber" resultType="int">
		select count(*)
		from busi_user_list
		where cer_number = #{cer_number}
	</select>
	 
</mapper>